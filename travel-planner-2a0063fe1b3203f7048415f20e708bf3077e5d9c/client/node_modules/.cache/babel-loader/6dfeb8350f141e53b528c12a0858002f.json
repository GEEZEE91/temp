{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zivko\\\\Music\\\\travel-planner-2a0063fe1b3203f7048415f20e708bf3077e5d9c\\\\client\\\\src\\\\components\\\\FlightDetail\\\\index.js\";\nimport React, { useState } from 'react';\nimport { Accordion, Icon, Button, Popup } from 'semantic-ui-react';\nimport SingleTrip from './SingleTrip';\nimport { durationFormater, timeFormater } from '../../utils/helpers';\nimport { useMutation } from '@apollo/react-hooks';\nimport { ADD_FLIGHT } from '../../utils/mutations';\n\nconst FlightDetail = ({\n  flightResult,\n  activeIndex,\n  setActiveIndex,\n  tripID\n}) => {\n  const airlines = require('airline-codes');\n\n  const {\n    id,\n    itineraries,\n    price: {\n      grandTotal,\n      currency\n    } = {},\n    validatingAirlineCodes\n  } = flightResult; // Saved popup\n\n  const [open, setOpen] = useState(false);\n\n  const handleClick = (e, {\n    index\n  }) => {\n    const newIndex = activeIndex === index ? -1 : index;\n    setActiveIndex(newIndex);\n  };\n\n  const [addFlight, {\n    error\n  }] = useMutation(ADD_FLIGHT);\n\n  const handleSave = async () => {\n    // Create FlightInput for mutation\n    const FlightInput = {};\n    FlightInput.tripId = tripID;\n    FlightInput.duration = durationFormater(itineraries[0].duration);\n    FlightInput.airline = airlines.findWhere({\n      iata: validatingAirlineCodes[0]\n    }).get('name');\n    FlightInput.departure = `${timeFormater(itineraries[0].segments[0].departure.at)}`;\n\n    if (itineraries[1]) {\n      // Check for returning\n      FlightInput.duration += `, ${durationFormater(itineraries[1].duration)}`;\n      FlightInput.return = `${timeFormater(itineraries[1].segments[0].departure.at)}`;\n    }\n\n    ;\n    FlightInput.cost = parseInt(grandTotal);\n    FlightInput.people = flightResult.travelerPricings.length; // Send Mutation\n\n    try {\n      const data = await addFlight({\n        variables: {\n          flightData: FlightInput\n        }\n      }); // console.log(data);\n\n      setActiveIndex(-1);\n    } catch (err) {\n      alert(\"Something went wrong\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Accordion.Title, {\n    active: activeIndex === id,\n    index: id,\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }), validatingAirlineCodes.map((code, i) => {\n    const airline = airlines.findWhere({\n      iata: code\n    }).get('name');\n    return i === validatingAirlineCodes.length - 1 ? airline : `${airline}, `;\n  }), ', ', grandTotal, ' ', currency), /*#__PURE__*/React.createElement(Accordion.Content, {\n    active: activeIndex === id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: itineraries[1] ? \"col-12 col-md-6\" : \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, \"Departure: \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, durationFormater(itineraries[0].duration), ' ', itineraries[0].segments.length === 1 ? 'Nonstop' : `${itineraries[0].segments.length - 1} stop`, ' ')), /*#__PURE__*/React.createElement(SingleTrip, {\n    itinerary: itineraries[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  })), itineraries[1] ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 33\n    }\n  }, \"Return: \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, durationFormater(itineraries[1].duration), ' ', itineraries[1].segments.length === 1 ? 'Nonstop' : `${itineraries[1].segments.length - 1} stop`, ' ')), /*#__PURE__*/React.createElement(SingleTrip, {\n    itinerary: itineraries[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  })) : ''), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    content: 'Save',\n    onClick: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }))));\n};\n\nexport default FlightDetail;","map":{"version":3,"sources":["C:/Users/zivko/Music/travel-planner-2a0063fe1b3203f7048415f20e708bf3077e5d9c/client/src/components/FlightDetail/index.js"],"names":["React","useState","Accordion","Icon","Button","Popup","SingleTrip","durationFormater","timeFormater","useMutation","ADD_FLIGHT","FlightDetail","flightResult","activeIndex","setActiveIndex","tripID","airlines","require","id","itineraries","price","grandTotal","currency","validatingAirlineCodes","open","setOpen","handleClick","e","index","newIndex","addFlight","error","handleSave","FlightInput","tripId","duration","airline","findWhere","iata","get","departure","segments","at","return","cost","parseInt","people","travelerPricings","length","data","variables","flightData","err","alert","map","code","i"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Accordion, Icon, Button,Popup} from 'semantic-ui-react';\nimport SingleTrip from './SingleTrip';\nimport {durationFormater, timeFormater} from '../../utils/helpers';\nimport {useMutation} from '@apollo/react-hooks';\nimport {ADD_FLIGHT} from '../../utils/mutations';\n\n\nconst FlightDetail = ({flightResult, activeIndex, setActiveIndex, tripID})=>{\n    const airlines = require('airline-codes');\n    const {id, itineraries, price: {grandTotal, currency} = {},validatingAirlineCodes} = flightResult;\n\n    // Saved popup\n    const [open, setOpen] = useState(false)\n    \n    const handleClick = (e,{index}) =>{\n        const newIndex = (activeIndex === index)? -1 : index;\n        setActiveIndex(newIndex);\n    }\n    const [addFlight, {error}] =useMutation(ADD_FLIGHT);\n\n    const handleSave = async()=>{\n        // Create FlightInput for mutation\n        const FlightInput={};\n        FlightInput.tripId = tripID;\n        FlightInput.duration = durationFormater(itineraries[0].duration);\n        FlightInput.airline = airlines.findWhere({iata: validatingAirlineCodes[0]}).get('name');\n        FlightInput.departure = `${timeFormater(itineraries[0].segments[0].departure.at)}`\n        if (itineraries[1]) {\n            // Check for returning\n            FlightInput.duration+= `, ${durationFormater(itineraries[1].duration)}`\n            FlightInput.return = `${timeFormater(itineraries[1].segments[0].departure.at)}`\n        };\n        FlightInput.cost = parseInt(grandTotal);\n        FlightInput.people = flightResult.travelerPricings.length;\n\n        // Send Mutation\n        try {\n            const data = await addFlight(\n                {\n                    variables:{flightData: FlightInput}\n                }\n            );\n            // console.log(data);\n            setActiveIndex(-1);\n        } catch (err){\n            alert(\"Something went wrong\");\n        }\n    }\n\n    return (\n        <>\n            <Accordion.Title active = {activeIndex === id} index={id} onClick={handleClick}>\n                <Icon name='dropdown' />\n                {/* Header information */}\n                    {validatingAirlineCodes.map((code, i) => {\n                        const airline = airlines.findWhere({iata: code}).get('name');\n                        return (i === validatingAirlineCodes.length-1)?airline : `${airline}, `\n                    })}\n\n                    {', '}{grandTotal}{' '}{currency}\n            </Accordion.Title>\n            <Accordion.Content active={activeIndex === id}>\n                {/* Departure and returning */}\n                <div className={\"row\"}>\n                    <div className={(itineraries[1]? \"col-12 col-md-6\":\"col-12\")}>\n                        <div className={\"d-flex justify-content-between m-0\"}>\n                            <h3>Departure: </h3> \n                            <p className={\"text-right\"}>{durationFormater(itineraries[0].duration)}{' '}{itineraries[0].segments.length === 1?'Nonstop':`${itineraries[0].segments.length-1} stop`}{' '}</p>\n                        </div>\n                        \n                        <SingleTrip itinerary={itineraries[0]}/>\n                    </div>\n                    {/* Return trip if there's more than 1 intinerary */}\n                    {itineraries[1]?(\n                        <div className={\"col-12 col-md-6\"}>\n                            <div className={\"d-flex justify-content-between m-0\"}>\n                                <h3>Return: </h3> \n                                <p className={\"text-right\"}>{durationFormater(itineraries[1].duration)}{' '}{itineraries[1].segments.length === 1?'Nonstop':`${itineraries[1].segments.length-1} stop`}{' '}</p>\n                            </div>\n                            <SingleTrip itinerary={itineraries[1]}/>\n                        </div>\n                    ):''}\n                </div>\n                \n                <div className={\"text-right\"}>\n                <Button content={'Save'} onClick={handleSave}/>\n\n                </div>\n                \n            </Accordion.Content>\n        </>\n    );\n\n}\n\n\nexport default FlightDetail;"]},"metadata":{},"sourceType":"module"}