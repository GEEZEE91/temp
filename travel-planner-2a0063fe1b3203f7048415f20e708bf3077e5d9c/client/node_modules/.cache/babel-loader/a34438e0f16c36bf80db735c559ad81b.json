{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zivko\\\\Music\\\\travel-planner-2a0063fe1b3203f7048415f20e708bf3077e5d9c\\\\client\\\\src\\\\components\\\\Landing\\\\Login.js\";\nimport React, { useState } from 'react';\nimport { Form, Button, Message, Modal, Input } from 'semantic-ui-react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { LOGIN } from '../../utils/mutations';\nimport Auth from '../../utils/auth';\n\nconst LoginForm = () => {\n  const [userFormData, setUserFormData] = useState({\n    username: '',\n    password: ''\n  }); // set loginUser as mutation\n\n  const [loginUser, loginError] = useMutation(LOGIN);\n  const [isLoading, setLoading] = useState(false);\n  const [showAlert, setShowAlert] = useState(false); // using error to show alert, check only when there's an error\n  // useEffect(() => {\n  //     if (error) setShowAlert(true);\n  //     else setShowAlert(false);\n  // }, [loginError]);\n\n  const [open, setOpen] = useState(false); // For Modal\n\n  const inlineStyle = {\n    modal: {\n      height: 'auto',\n      top: 'auto',\n      left: 'auto',\n      bottom: 'auto',\n      right: 'auto',\n      width: '300px'\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const response = await loginUser({\n        variables: { ...userFormData\n        }\n      });\n      const token = response.data.login.token; // console.log(token);\n\n      Auth.login(token);\n      setOpen(false);\n    } catch (err) {\n      setLoading(false);\n      setShowAlert(true);\n    }\n  };\n\n  const handleInput = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setUserFormData({ ...userFormData,\n      [name]: value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: () => setOpen(false),\n    onOpen: () => setOpen(true),\n    open: open,\n    style: inlineStyle.modal,\n    trigger: /*#__PURE__*/React.createElement(Button, {\n      color: 'green',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 18\n      }\n    }, \" Login\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    loading: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    control: Input,\n    label: \"Username\",\n    name: \"username\",\n    onChange: handleInput,\n    placeholder: \"Username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    control: Input,\n    label: \"Password\",\n    name: \"password\",\n    type: 'password',\n    onChange: handleInput,\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }), showAlert ? /*#__PURE__*/React.createElement(Message, {\n    negative: true,\n    header: \"Bad Request\",\n    content: \"Please check your creditials\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 34\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(Form.Field, {\n    fluid: true,\n    control: Button,\n    color: 'blue',\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Submit\"))));\n};\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/Users/zivko/Music/travel-planner-2a0063fe1b3203f7048415f20e708bf3077e5d9c/client/src/components/Landing/Login.js"],"names":["React","useState","Form","Button","Message","Modal","Input","useMutation","LOGIN","Auth","LoginForm","userFormData","setUserFormData","username","password","loginUser","loginError","isLoading","setLoading","showAlert","setShowAlert","open","setOpen","inlineStyle","modal","height","top","left","bottom","right","width","handleSubmit","e","preventDefault","response","variables","token","data","login","err","handleInput","event","name","value","target"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,OAAvB,EAAgCC,KAAhC,EAAuCC,KAAvC,QAAoD,mBAApD;AACA,SAAQC,WAAR,QAA0B,qBAA1B;AACA,SAAQC,KAAR,QAAoB,uBAApB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;;AAGA,MAAMC,SAAS,GAAG,MAAI;AAElB,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCX,QAAQ,CAAC;AAAEY,IAAAA,QAAQ,EAAE,EAAZ;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAAD,CAAhD,CAFkB,CAIlB;;AACA,QAAM,CAACC,SAAD,EAAYC,UAAZ,IAA0BT,WAAW,CAACC,KAAD,CAA3C;AAEA,QAAM,CAACS,SAAD,EAAYC,UAAZ,IAAwBjB,QAAQ,CAAC,KAAD,CAAtC;AAEA,QAAM,CAACkB,SAAD,EAAYC,YAAZ,IAA4BnB,QAAQ,CAAC,KAAD,CAA1C,CATkB,CAUlB;AACA;AACA;AACA;AACA;;AAEA,QAAM,CAACoB,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,KAAD,CAAhC,CAhBkB,CAgBuB;;AAEzC,QAAMsB,WAAW,GAAG;AAChBC,IAAAA,KAAK,EAAG;AACNC,MAAAA,MAAM,EAAE,MADF;AAENC,MAAAA,GAAG,EAAE,MAFC;AAGNC,MAAAA,IAAI,EAAE,MAHA;AAINC,MAAAA,MAAM,EAAE,MAJF;AAKNC,MAAAA,KAAK,EAAE,MALD;AAMNC,MAAAA,KAAK,EAAC;AANA;AADQ,GAApB;;AAWA,QAAMC,YAAY,GAAG,MAAOC,CAAP,IAAW;AAC5BA,IAAAA,CAAC,CAACC,cAAF;AACAf,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACA,YAAMgB,QAAQ,GAAG,MAAMnB,SAAS,CAC9B;AACEoB,QAAAA,SAAS,EAAE,EAAC,GAAGxB;AAAJ;AADb,OAD8B,CAAhC;AAKA,YAAMyB,KAAK,GAAEF,QAAQ,CAACG,IAAT,CAAcC,KAAd,CAAoBF,KAAjC,CANA,CAOA;;AACA3B,MAAAA,IAAI,CAAC6B,KAAL,CAAWF,KAAX;AACAd,MAAAA,OAAO,CAAC,KAAD,CAAP;AACH,KAVD,CAUE,OAAOiB,GAAP,EAAY;AACVrB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;AACJ,GAjBD;;AAkBA,QAAMoB,WAAW,GAAIC,KAAD,IAAW;AAC3B,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,KAAK,CAACG,MAA9B;AACAhC,IAAAA,eAAe,CAAC,EAAE,GAAGD,YAAL;AAAmB,OAAC+B,IAAD,GAAQC;AAA3B,KAAD,CAAf;AACH,GAHD;;AAKA,sBACI,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAE,MAAMrB,OAAO,CAAC,KAAD,CAA7B;AACA,IAAA,MAAM,EAAE,MAAMA,OAAO,CAAC,IAAD,CADrB;AAEA,IAAA,IAAI,EAAED,IAFN;AAEY,IAAA,KAAK,EAAEE,WAAW,CAACC,KAF/B;AAGA,IAAA,OAAO,eAAE,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAI,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAII,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAEP,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,KAAN;AACI,IAAA,OAAO,EAAEX,KADb;AAEI,IAAA,KAAK,EAAC,UAFV;AAGI,IAAA,IAAI,EAAC,UAHT;AAII,IAAA,QAAQ,EAAEkC,WAJd;AAKI,IAAA,WAAW,EAAC,UALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAQI,oBAAC,IAAD,CAAM,KAAN;AACI,IAAA,OAAO,EAAElC,KADb;AAEI,IAAA,KAAK,EAAC,UAFV;AAGI,IAAA,IAAI,EAAC,UAHT;AAII,IAAA,IAAI,EAAI,UAJZ;AAKI,IAAA,QAAQ,EAAEkC,WALd;AAMI,IAAA,WAAW,EAAC,UANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,EAgBMrB,SAAS,gBAAE,oBAAC,OAAD;AAAS,IAAA,QAAQ,MAAjB;AAAkB,IAAA,MAAM,EAAC,aAAzB;AAAuC,IAAA,OAAO,EAAC,8BAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAF,gBAAoF,yCAhBnG,eAiBI,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,OAAO,EAAEhB,MAA3B;AAAmC,IAAA,KAAK,EAAI,MAA5C;AAAoD,IAAA,OAAO,EAAE4B,YAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAjBJ,CADJ,CAJJ,CADJ;AA6BH,CAjFD;;AAmFA,eAAerB,SAAf","sourcesContent":["import React, {useState} from 'react';\nimport { Form, Button, Message, Modal, Input } from 'semantic-ui-react';\nimport {useMutation} from '@apollo/react-hooks';\nimport {LOGIN} from '../../utils/mutations';\nimport Auth from '../../utils/auth';\n\n\nconst LoginForm = ()=>{\n\n    const [userFormData, setUserFormData] = useState({ username: '',password: '' });\n\n    // set loginUser as mutation\n    const [loginUser, loginError] = useMutation(LOGIN);\n\n    const [isLoading, setLoading]=useState(false);\n\n    const [showAlert, setShowAlert] = useState(false);\n    // using error to show alert, check only when there's an error\n    // useEffect(() => {\n    //     if (error) setShowAlert(true);\n    //     else setShowAlert(false);\n    // }, [loginError]);\n\n    const [open, setOpen] = useState(false); // For Modal\n\n    const inlineStyle = {\n        modal : {\n          height: 'auto',\n          top: 'auto',\n          left: 'auto',\n          bottom: 'auto',\n          right: 'auto',\n          width:'300px',\n        }\n      };\n\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        setLoading(true);\n        try {\n            const response = await loginUser(\n              { \n                variables: {...userFormData}\n              });\n              \n            const token= response.data.login.token;\n            // console.log(token);\n            Auth.login(token);\n            setOpen(false);\n        } catch (err) {\n            setLoading(false);\n            setShowAlert(true);\n        }\n    }\n    const handleInput = (event) => {\n        const { name, value } = event.target;\n        setUserFormData({ ...userFormData, [name]: value });\n    };\n\n    return (\n        <Modal onClose={() => setOpen(false)}\n        onOpen={() => setOpen(true)}\n        open={open} style={inlineStyle.modal}\n        trigger={<Button color = {'green'}> Login</Button> }>\n            <Modal.Content>\n                <Form loading={isLoading} >\n                    <Form.Field\n                        control={Input}\n                        label='Username'\n                        name='username'\n                        onChange={handleInput}\n                        placeholder='Username'\n                    />\n                    <Form.Field\n                        control={Input}\n                        label='Password'\n                        name='password'\n                        type = {'password'}\n                        onChange={handleInput}\n                        placeholder='Password'\n                    />\n                     {showAlert?(<Message negative header='Bad Request' content='Please check your creditials'/>):(<></>)}\n                    <Form.Field fluid control={Button} color = {'blue'} onClick={handleSubmit}>Submit</Form.Field>\n                </Form>\n            </Modal.Content>\n\n        </Modal>\n    )\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}